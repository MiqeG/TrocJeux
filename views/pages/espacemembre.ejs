<% include header %>



<div class="ui basic modal annoncemodal">
  <div class="ui icon header">
    <i class="trash alternate icon"></i>
    Effacer l'annonce?
  </div>
  <div class="content">
    <p>Si vous confirmez l'annonce sera effacée de la base de données...</p>
  </div>
  <div class="actions">
    <div class="ui red basic cancel inverted button">
      <i class="remove icon"></i>
      Non
    </div>
    <div class="ui green ok inverted button formLoadingMembre" id="Oui">
      <i class="checkmark icon"></i>
      Oui
    </div>
  </div>
</div>
<div class="ui inverted   asd "
  style="border-radius: 0!important; border: 0; margin-left: 260px;padding-bottom:5%; -webkit-transition-duration: 0.1s;">
  </i>
  <h1> <i class="user  teal icon"></i>Espace Membre</h1>
  <div class="ui top   attached tabular menu">
    <a class="item active toggler2 "><i class="list alternate outline icon"></i>
      <span style="color:rgb(36, 161, 161);">Annonces</span>

    </a>
    <a class="item toggler1"><i class="address card icon"></i>
      <span style="color:rgb(36, 161, 161);">Infos</span>

    </a>

    <div class="right menu">
      <div class="item">

      </div>

    </div>

  </div>
  <div class="ui bottom attached segment ">
    <div class="togglerClass1" hidden>
      <h3> <i class="ui pencil alternate teal icon"></i> Vos coordonnées...</h3>
      <table class="ui   table">

        <tbody>
          <tr class="fontWeight">
            <td><i class="address card teal icon"></i><span>Nom</span> </td>
            <td><%= user.Nom %></td>

          </tr>
          <tr class="fontWeight">
            <td><i class="address card outline teal icon"></i> Prenom</td>
            <td> <%= user.Prenom %></td>

          </tr>
          <tr class="fontWeight">
            <td><i class="envelope open outline teal icon"></i></i> Email</td>
            <td> <%= user.Email %></td>

          </tr>
          <tr class="fontWeight">
            <td><i class="user teal icon"></i> Nom d'utilisateur</td>
            <td> <%= user.NomUitilisateur %></td>

          </tr>
          <tr class="fontWeight">
            <td><i class="address card teal icon"></i></i> Adresse</td>
            <td> <%= user.Adresse %></td>

          </tr>
          <tr class="fontWeight">
            <td><i class="address card outline teal icon"></i> Code Postal</td>
            <td><%= user.CodePostal %></td>

          </tr>
          <tr class="fontWeight">
            <td><i class="chess rook teal icon"></i></i>Ville</td>
            <td><%= user.Ville %></td>

          </tr>
          <tr class="fontWeight">
            <td><i class="globe teal icon"></i> Pays</td>
            <td><%= user.Pays %></td>

          </tr>
        </tbody>
      </table>




      <div class="item">

        <div class="content">

          <p></p>
          <div class="ui right  teal  button"><i class=" edit  icon"></i>Modifier</div>


        </div>
      </div>



    </div>

    <div class="ui divided demo items togglerClass2">
      <h3><i class="ui teal wpforms icon"></i>Vos annonces...</h3>
      <div class="ui   styled fluid  accordion" style="background-color:rgba(223, 215, 215,0.15);">
        <% if(annonces[0])  { %>
        <div id="selection" data-selection="" data-user="<%= annonces[0].User_Id %>" hidden></div>
        <% let slideCounter=0 %>
        <%  for(let index = 0; index < annonces.length; index++) {   %>

        <div class="ui items" id="annonce<%= annonces[index]._id %>">
          <div class=" title">
            <i class="dropdown icon"></i>
            <% let DateTimeVariable= new Date( annonces[index].DatePublication ) %>
            <span class="hlink"> <%= annonces[index].Titre %></span>
            <i class="ui calendar alternate teal icon"></i> <span style="color:teal;">
              <%= DateTimeVariable.getDate() +' / '+DateTimeVariable.getMonth()+' / '+DateTimeVariable.getFullYear() %>
              <span>&nbsp<i class="ui clock teal icon"></i></span>
              <%= DateTimeVariable.getHours()+' : '+DateTimeVariable.getMinutes()+' : '+DateTimeVariable.getSeconds() %>
            </span>

          </div>
          <div class="content">
            <div class="item ">

              <div class="image" style="min-height:300px;">






                <div class="content left" style="overflow-y: scroll">
                    <div class="slideshow-container">
           
                    <div class="content " style="width:200px;height:200px">
                    
                        <% for(let index3 = 0; index3 < annonces[index].UserImages.length; index3++) { slideCounter++ 
                                    let paddingImg=''; if(index3==0){paddingImg='padding:5px;'} %>

                        <div class="mySlides fade"></div>
                          <div class="numbertext"><%= index3 %> / <%= annonces[index].UserImages.length %></div>
                           <img
                                id="masterImg<%= index  %>"
                                class="ui  bordered rounded   image ZoomImage"
                                src=" <%= '/pregistered/' + annonces[index].User_Id+'/' + annonces[index]._id +'/'+ annonces[index].UserImages[index3] %> "
                                onerror="this.src=imgError(this)" style="width:200px;height:200px;  ;margin:5px;">
                                <div id="<%= 'miniatureImg' + index + index3 %>">  </div>
                          </div>



                          <% } %>
                          <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                          <a class="next" onclick="plusSlides(1)">&#10095;</a>

                          <% for(let index2 = 0; index2 < annonces[index].UserImages.length; index2++) { %>
                          <div style="text-align:center">
                            <img class="dot ui circular image " src=" <%= '/pregistered/' + annonces[index].User_Id+'/' + annonces[index]._id +'/'+ annonces[index].UserImages[index2] %>" style="width:35px;height:35px;"  onerror="this.src=imgError(this)" onclick="currentSlide(<%= index2+1 %>)"></span>

                          </div>
                          <% } %>

                        </div>
                        <br>

                      </div>

                      <p>
                        <div style="float:right;padding-right:15%;">
                          <ol class="ui list">
                            <div hidden id="<%= annonces[index]._id  %>"><%= annonces[index]._id  %> </div>

                            <li value=""><a class="ihlink "><i class="chess teal icon" style="size:100px"></i>
                                <%= annonces[index].Titre %> </a></li>
                            <br>
                            <br>
                            <li value=""><i class="table teal icon"></i>
                              <% for(let index4 = 0; index4 < annonces[index].Categories.length; index4++) { %>
                              <%= annonces[index].Categories[index4]  %>
                              <% } %>

                            </li>
                            <br>
                            <li value=""></li>
                            <li value=""> <i class="user teal icon"></i> <%= annonces[index].NomUitilisateur  %></li>

                            <li value=""> <i class="envelope open teal icon "></i> <%= annonces[index].Email  %></li>
                            <li value=""> <i class="address card teal icon"></i> <%= annonces[index].Ville %></li>
                            <li value=""> <i class="address card outline teal icon"></i>
                              <%= annonces[index].CodePostal %>
                            </li>

                          </ol>
                      </p>
                    </div>
                  </div>





                </div>



              </div>

              <div>


                <div class="extra">

                  <div class="ui form espacemembre">
                    <div class="field">
                      <label>Texte d'annonce</label>
                      <textarea readonly="">       <%= annonces[index].Texte %></textarea>
                    </div>




                  </div>

                  <div class="description">
                    <div class="ui right  teal  button memberbuttons" style="margin:10px; width:100px;"
                      onclick="window.location.href='/modifier/annonceid'"><i class=" edit  icon"
                        data-idannonce="<%= annonces[index]._id  %>"></i>Modifier</div>
                    <div data-idannonce="<%= annonces[index]._id %>"
                      class="ui right  red  button modalshow memberbuttons" style="margin:10px; width:100px;"><i
                        class=" delete  icon"></i>Supprimer
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>







          <% } %>
          <% } %>


        </div>
      </div>
    </div>
  </div>









</div>

</div>

</div>

</div>

</div>
<script>
  $(document).ready(function () {

    $('.miniatureImg').click(function () {
      $('#masterImg' + $(this).attr('data-masterRef')).attr('src', $(this).attr('src'))
      $('.miniatureImg.' + $(this).attr('data-masterRef')).css('padding', '0px')
      $(this).css('padding', '5px')
    })
  })
</script>
<% include footer %>